title AcceptDailyPlan

participant WebApp
participant DailyPlanService
participant ProductionDataService
participant DBAL
participant DBMS
participant NotificationService

entryspacing 1.3
activate WebApp
WebApp->DailyPlanService: generateDailyPlan(agronomist: Agronomist, date: DateTime)
activate DailyPlanService
DailyPlanService->ProductionDataService:readDataByArea(area: Area, from: DateTime, to: DateTime): ProductionData[]
activate ProductionDataService
ProductionDataService->DBAL: query(q: string)
activate DBAL
DBAL->DBMS: query(q: string)
activate DBMS
DBAL<<--DBMS: ProductionData[]
deactivate DBMS
ProductionDataService<<--DBAL: ProductionData[]
deactivate DBAL
DailyPlanService<<--ProductionDataService:ProductionData[]
deactivate ProductionDataService
WebApp<<--DailyPlanService: daily plan details
deactivate DailyPlanService
opt acceptable daily plan
WebApp->DailyPlanService: saveDailyPlan(agronomist: Agronomist, dailyPlan: DailyPlan)
activate DailyPlanService
DailyPlanService->DBAL: insert(d: Data)
activate DBAL
DBAL->DBMS: insert(d: Data)
activate DBMS
DBAL<<--DBMS: ack
deactivate DBMS
DailyPlanService<<--DBAL: ack
deactivate DBAL
DailyPlanService->NotificationService: notify(user: User, message: Message)
activate NotificationService
DailyPlanService<<--NotificationService: ack
deactivate NotificationService
WebApp<<--DailyPlanService: ack
end opt
deactivate DailyPlanService